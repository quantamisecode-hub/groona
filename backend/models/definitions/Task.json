{
  "name": "Task",
  "type": "object",
  "properties": {
    "tenant_id": {
      "type": "string",
      "description": "ID of the tenant this task belongs to"
    },
    "workspace_id": {
      "type": "string",
      "description": "ID of the workspace this task belongs to"
    },
    "project_id": {
      "type": "string",
      "description": "ID of the parent project"
    },
    "story_id": {
      "type": "string",
      "description": "ID of the parent story (optional - tasks can exist without stories)"
    },
    "title": {
      "type": "string",
      "description": "Task title"
    },
    "reference_url": {
      "type": "string",
      "description": "Optional reference URL (e.g., Figma, Webpage)"
    },
    "description": {
      "type": "string",
      "description": "Detailed task description"
    },
    "task_type": {
      "type": "string",
      "enum": [
        "story",
        "bug",
        "epic",
        "task",
        "technical_debt"
      ],
      "default": "task",
      "description": "Type of task"
    },
    "status": {
      "type": "string",
      "default": "todo",
      "description": "Task status"
    },
    "priority": {
      "type": "string",
      "enum": [
        "low",
        "medium",
        "high",
        "urgent"
      ],
      "default": "medium",
      "description": "Task priority"
    },
    "assigned_to": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Emails of assigned team members"
    },
    "reporter": {
      "type": "string",
      "description": "Email of user who created the task"
    },
    "sprint_id": {
      "type": "string",
      "description": "ID of the sprint (optional)"
    },
    "story_points": {
      "type": "number",
      "minimum": 0,
      "description": "Story points for effort estimation"
    },
    "due_date": {
      "type": "string",
      "format": "date",
      "description": "Task deadline"
    },
    "completed_date": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp when task was marked as completed"
    },
    "estimated_hours": {
      "type": "number",
      "description": "Estimated hours to complete"
    },
    "labels": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Task labels/tags"
    },
    "attachments": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "url": {
            "type": "string"
          },
          "type": {
            "type": "string"
          }
        }
      },
      "description": "File attachments"
    },
    "dependencies": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "IDs of dependent tasks"
    },
    "acceptance_criteria": {
      "type": "string",
      "description": "Acceptance criteria for task completion"
    },
    "subtasks": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string"
          },
          "completed": {
            "type": "boolean",
            "default": false
          },
          "assigned_to": {
            "type": "string",
            "description": "Email of assignee"
          },
          "due_date": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "description": "List of subtasks"
    },
    "blocked_by": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string"
          },
          "completed": {
            "type": "boolean",
            "default": false
          },
          "assigned_to": {
            "type": "string",
            "description": "Email of assignee"
          },
          "due_date": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "description": "Standalone blocked-by dependencies"
    },
    "custom_fields": {
      "type": "object",
      "description": "Custom fields for flexible task data"
    },
    "ai_generated": {
      "type": "boolean",
      "default": false,
      "description": "Whether this task was AI-generated"
    },
    "milestone_id": {
      "type": "string",
      "description": "ID of the associated milestone (optional)"
    },
    "ai_metadata": {
      "type": "object",
      "properties": {
        "priority_confidence": {
          "type": "number"
        },
        "effort_confidence": {
          "type": "number"
        },
        "suggested_tags": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "detected_dependencies": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "description": "AI-generated metadata"
    }
  },
  "required": [
    "tenant_id",
    "title"
  ]
}